\documentclass[letterpaper,12pt,notitlepage]{report}

\usepackage[latin1]{inputenc}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{fontenc}
\usepackage{graphicx}

\begin{document}
\title{OSMC Interface Shield}
\author{}
\date{}
\maketitle

\subsection{TODO}
\begin{enumerate}
 \item rename disable/enable
 \item bypass caps (10u, 100u)
 \item ground loops?
 \item check use MISO for SS
 \item check parts
 \item calculate component values for isolators, filters, and decoupling caps
 \item final check - trace widths, emf compatablity, ground plane penetration, etc
 \item cleanup - silkscreen
 \item finish documentation - add image of schematic and layout - legal check
 \item look for pcb company
 \item order samples => adjust Dikikey order
 \item get someone else to check
\end{enumerate}

\subsection{Board Description}

\subsection{Pinout}

inverted signal?

\subsection{Circuit Design}

Consider getting some cable to connect the hall effect sensors that has a shield and internally twisted wires. Connect the shield wire to the GND of the control board only at this one point - hopefully this way any capacitive coupled noise should be conducted straight to the bypass capacitors. To protect against magnetic noise on the line, again make sure that the internal wires are twisted about each other - the power is like the input current and the signal and gnd represent the return current. The less area there is in the loop (by having them twisted as tightly as possible) the less likely this system is to pick stray magnetic fields on the cable. And of course, you can play with the capacitance value on the low pass filter. 

Since the sampling rate for the arduino is ? the cutoff for the anti-aliasing filter was chosen to be ?, which makes the sampling rate equal to 10(?) times the maximum frequency.

Optoisolators were used to seperate the two power sources.  Ground planes where used to reduce noise.

This design assumes that the motors are being driven from the same source.

\textquotedblleft The input lines of the 4081A are 'modified TTL' in that a high level signal is any voltage between 3 and 12V\textquotedblright

The digital isolations circuits (speed, direction, and enable) are phototransisters in a common collector (buffer) configuration.  The pull-down resistors aren't strictly necessary since the pins are pulled low by OSMC, but they are kept so that the pins can be used for other boards that don't do this.


No header for a joystick was added because there will always be a computer present.

\subsection{Layout}

ground planes

bypass cap locations

\subsection{Parts list}
\subsubsection{Optoisolators}
\begin{description}
 \item[MOCD213-M] x 3

2 channel optocoupler with transistor output.  Any kind of optocoupler can be used for the digital signals.  The part I picked was the cheapest I could find at the time on Digikey.

 \item[HCNR200/1] x 1

Analog optocoupler for measuring battery voltages.  It would be nicer if this was in a smaller package.

\end{description}

\subsubsection{Headers}
\begin{description}
 \item[?] x 3

for arduino

 \item[?] x 2

for OSMC

 \item[?] x 2

for encoders

 \item[?] x 2

for current sensors

 \end{description}

\subsection{Future}
\begin{itemize}
 \item bias battery voltage measurement
 \item joystick?
 \item DC voltage control: using PWM to control the OSMC swtiching is not as efficient as using direct DC voltages.  This could be done by adding a lowpass filter to the PWM output or by using a DAC.
 \item Temperature sensing
 \item Regenerative Motor Braking (part of the OSMC?)
\end{itemize}

\end{document}
